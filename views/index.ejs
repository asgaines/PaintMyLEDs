<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <meta name="description" content="Paint image on LED grid in the real world by drawing on webpage canvas">
    <meta name="author" content="Andrew Gaines">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/particle-api-js/5/particle.min.js"></script>
  </head>
  <body ng-app="paintMyLEDs">
    <nav class="navbar">
      <ul class="nav nav-tabs">
        <li role="navigation"><a href="/#/paint">New Painting</a></li>
        <li role="navigation"><a href="/#/paintings">Submissions</a></li>
      </ul>
    </nav>

    <div class="container">
      <ui-view></ui-view>
    </div>

    <script type="text/ng-template" id="/paint.html">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <div class="page-header">
            <h1><%= title %></h1>
            <p>Welcome to <%= title %>. Draw anything on the grid below and click Publish to send your drawing to a real matrix of LEDs in my apartment. Left-click on grid to turn on LEDs, right-click to turn off. When complete, click Publish. Code lives <a href="https://github.com/asgaines/PaintMyLEDs">here</a>.</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 text-center">
          <div class="success">{{ successMessage }}</div>
          <div class="error">{{ errorMessage }}</div>
          <br />
          <canvas id="ledGrid" width="800" height="400">
            Sorry, your browser does not support the required animations. Please update your browser to use this site.
          </canvas>
        </div>
      </div>
      <div class="row">
        <div class="col-md-2 col-md-offset-5 text-center">
          <form ng-submit="publishGrid()">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Name (optional)" ng-model="artist" />
            </div>
            <button type="submit" id="publishGrid" class="btn btn-primary">Publish</button>
          </form>
        </div>
      </div>
      <div class="loading-spinner" ng-show="loading"></div>
    </script>

    <script type="text/ng-template" id="/paintings.html">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <div class="page-header">
            <h1><%= title %></h1>
            <p>List of all past submitted paintings</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 text-center">
          <div ng-repeat="painting in paintings | orderBy: '-createdAt'">
            <draw-canvas painting="painting"></draw-canvas>
            <div>
              {{ painting.createdAt | date:'MMMM d, yyyy \'at\' h:mm:ss a' }}
            </div>
            <div ng-show="painting.artist">
              by {{ painting.artist }}
            </div>
            <hr />
          </div>
        </div>
      </div>
    </script>
    <script src="/javascripts/LED_canvas.js"></script>
    <script src="/javascripts/angularApp.js"></script>
  </body>
</html>
